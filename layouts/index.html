{{ define "main" }}
<div class="section-container">
  <section class="cards-section">
    <h2>프로젝트 카드</h2>
    <div class="cards-container">
      {{ range .Pages }}
        {{ $link := .RelPermalink }}
        {{ $target := "" }}
        {{ if .Params.external_link }}
          {{ $link = .Params.external_link }}
          {{ $target = "target=\"_blank\" rel=\"noopener\"" }}
        {{ end }}

        {{ $summary := "" }}
        {{ if .Params.summary }}
          {{ $summary = .Params.summary | markdownify | emojify }}
        {{ else if .Params.abstract }}
          {{ $summary = .Params.abstract | markdownify | emojify | truncate (site.Params.abstract_length | default 135) }}
        {{ else if .Summary }}
          {{ $summary = .Summary }}
        {{ end }}

        {{ $resource := .Params.featured_image }}
        <div class="card">
          {{ with $resource }}
            <a href="{{ $link }}" {{ $target | safeHTMLAttr }}>
              <img src="{{ . }}" alt="{{ .Title }}" style="width: 100%; height: auto;" loading="lazy">
            </a>
          {{ end }}
          <div class="card-text">
            <h3><a href="{{ $link }}" {{ $target | safeHTMLAttr }}>{{ .Title | markdownify | emojify }}</a></h3>
            {{ with $summary }}
              <p>{{ . }}</p>
            {{ end }}
          </div>
        </div>
      {{ end }}
    </div>
  </section>
</div>
{{ end }}
